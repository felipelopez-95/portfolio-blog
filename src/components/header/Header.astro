---
import Menu from "./Menu.astro";
import Nav from "./Nav.astro";
---

<header class="header">
    <div class="header-button-wrapper">
        <Menu />
    </div>
    <div class="header-nav-wrapper">
        <Nav />
    </div>
</header>

<style>
    .header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 56px;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding: 1rem 1rem 0 1rem;
        z-index: 1000;
        background-color: transparent;
    }

    .header-button-wrapper {
        display: block;
    }

    .header-nav-wrapper {
        display: none;
    }

    .header-nav-wrapper.show {
        display: block;
        position: absolute;
        top: 56px;
        left: 0;
        width: 100%;
        background-color: transparent;
    }

    @media (min-width: 768px) {
        .header {
            justify-content: center;
            height: 56px;
            padding: 0.2rem 0 0 0;
        }

        .header-button-wrapper {
            display: none;
        }

        .header-nav-wrapper {
            display: block;
            background-color: transparent;
            border-radius: 99px;
            padding: 0.1rem;
            border: 1px solid transparent;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .header-nav-wrapper.on-scroll {
            background-color: var(--bg-secondary);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 15px -5px rgba(0, 0, 0, 0.4);
        }

        .header-nav-wrapper.show {
            position: static;
            width: auto;
        }
    }
</style>

<script>
    const menu = document.querySelector("#menu");
    const nav = document.querySelector(".header-nav-wrapper");

    // Lógica del menú hamburguesa (móvil)
    menu?.addEventListener("click", () => {
        nav?.classList.toggle("show");
        menu?.classList.toggle("is-active");
    });

    // Función para manejar el estado del fondo
    const handleHeaderScroll = () => {
        if (window.scrollY > 0) {
            nav?.classList.add("on-scroll");
        } else {
            nav?.classList.remove("on-scroll");
        }
    };

    // Verificar al cargar la página
    handleHeaderScroll();

    // Verificar al hacer scroll
    window.addEventListener("scroll", handleHeaderScroll);
</script>
